# GLSL スクール 2016 #1
- シェーダの記述に特化した 技術を広く学習することを目的としたスクール。
- 講師の方が事前にElectron製の独自エディタを作成。GLSLを実行する環境を事前に提供でき、後日復習もしやすいようにするため。

## シェーダとはなにか？
- GPU を利用し高速にグラフィックスを描画するための技術や概念の総称、みたいなもの。一言ではむずかしい。
- 映像表現のためだけに限らず、あらゆる演算処理を担う縁の下の力持ちになった。
  - フラクタル
  - 流体表現
- しかしシェーダの最大の仕事はやはり グラフィックスを描くことに繋がる 場合がほとんど。
- PC であれモバイル端末であれ、近年のデジタルデバイスの多くにはこの GPU がなんらかの形で備わっている。
- 3D APIの種類（Direct X / OpenGL / WebGL etc)
- WebGLはOpenGL ES の 2.0 のグラフィックス API を踏襲した実装になっている。

<iframe width="560" height="315" src="https://www.youtube.com/embed/-P28LKWTzrI" frameborder="0" allowfullscreen></iframe>

## GLSLとは？
- GLSL（OpenGL Shading Language）は、OpenGL ファミリーで利用できるシェーダ記述言語で、GLSL にも様々なバージョンが存在する。
- 現状の WebGL で利用する GLSL のバージョンは、GLSL ES 1.0。これは OpenGL ES 2.0 相当で利用されているものと同じ。
- OpenGL という API が存在するにもかかわらず、それ以外にわざわざ GLSL のような専用のシェーダ記述言語が必要なのか。
  - 昔は OpenGL には GLSL のようなシェーダ記述に特化した機構は備わっていなかった。(固定機能パイプライン)
  - 固定機能パイプラインは汎用性に乏しく表現に限界があった。
  - プログラマブルシェーダの登場。（GLSL のようなシェーダを自由に記述することができる仕組み）
  - よりカスタマイズ性に優れた演算・表現が可能になった。
- グラボの規格によって処理の仕方が異なる。ブラウザ互換よりもより厳しい。なるべく仕様に沿った書き方をしたほうが安全。

## シェーダの種類
- 頂点シェーダ vertex shader
  - 3D CGではあらゆるものを頂点によって表現する。
- フラグメントシェーダ flagment shader
  - APIによってはピクセルシェーダともいう。
  - 描画するピクセル1つ1つを処理する。
- WebGL以外のプラットフォームで実装されているシェーダ
  - ジオメトリシェーダ 頂点シェーダの処理結果をさらに加工できる。
  - テセレーションシェーダ
  - コンピュートシェーダ
  - サーフェスシェーダ

## 定数とマクロ
- 定数 const
  - シェーダ内で更新しない値などをコンパイル時に定義して処理を軽減できる（はず）
- マクロ define
  - constとの違いは、置き換えが可能なこと。gl_FragColorなどの組み込み関数の名前を置き換えたりもできる。（多分可読性は下がる）

## 関数定義
- JavaScriptと違い、関数定義は処理よりも前にかならず書かなければならない。
- 引数にin / out / inoutを使うことで参照渡しができる。

## precision
- 精度修飾子。GPUに値をどのくらい精密に処理してほしいかを記述する。
- フラグメントシェーダには精度修飾子を指定しないとコンパイルが通らない。mediumpでないと通らない端末がありうる。
- 頂点シェーダはhighpで動作しなければならないと決まっている。頂点シェーダで使用しているuniformの値をフラグメントシェーダで使う場合はフラグメントシェーダの精度修飾子もhighpでなければならない。
- 変数単位で精度を変えることもできる。 `uniform highp vec2 mouse;`
